name = "adblock-compiler"
main = "src/worker.ts"
compatibility_date = "2024-12-01"

# Enable the Workers runtime
workers_dev = true

# KV bindings for caching and rate limiting
[[kv_namespaces]]
binding = "COMPILATION_CACHE"
id = "7772628dc4ae46fbb145a811d2de351e"

[[kv_namespaces]]
binding = "RATE_LIMIT"
id = "5dc36da36d9142cc9ced6c56328898ee"

[[kv_namespaces]]
binding = "METRICS"
id = "025c3f10527c46c0be559f299bdba994"  # Create with: wrangler kv:namespace create METRICS

# Optional: Add R2 bindings for storing filter lists
# [[r2_buckets]]
# binding = "FILTER_STORAGE"
# bucket_name = "your-bucket-name"

# Environment variables
[vars]
COMPILER_VERSION = "0.8.1"

# Static assets configuration using modern assets
[assets]
directory = "./public"
binding = "ASSETS"

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Production settings (optional)
# [env.production]
# vars = { ENVIRONMENT = "production" }
